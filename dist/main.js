(()=>{"use strict";const e=function(){function e(){let e=document.querySelectorAll(".form");console.log(e),e.length>0&&e.forEach((e=>{e.remove()}))}return{projectForm:function(){e();let t=document.createElement("form");t.classList.add("form");let n=document.createElement("input");n.setAttribute("id","project-name"),n.setAttribute("type","text"),n.setAttribute("name","project");let o=document.createElement("label");o.setAttribute("for","project-name"),o.innerText="Project name: ";let i=document.createElement("input");return i.setAttribute("type","submit"),i.innerText="Submit Project",t.appendChild(o),t.appendChild(n),t.appendChild(i),t},toDoForm:function(){e();let t=document.createElement("form");t.classList.add("form");let n=document.createElement("div"),o=document.createElement("label");o.setAttribute("for","title"),o.innerText="Title: ";let i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("name","title"),i.setAttribute("id","title"),i.setAttribute("required",!0),n.appendChild(o),n.appendChild(i);let r=document.createElement("div"),c=document.createElement("select");c.setAttribute("id","select");let d=document.createElement("label");d.setAttribute("for","select"),d.innerText="Priority: ";let l=document.createElement("option");l.setAttribute("value","Low"),l.setAttribute("name","low"),l.setAttribute("selected",!0),l.setAttribute("required",!0),l.innerText="Low";let a=document.createElement("option");a.setAttribute("value","Mid"),a.setAttribute("name","mid"),a.setAttribute("required",!0),a.innerText="Mid";let s=document.createElement("option");s.setAttribute("value","High"),s.setAttribute("name","priority"),s.setAttribute("required",!0),s.innerText="High",r.appendChild(d),r.appendChild(c),c.appendChild(l),c.appendChild(a),c.appendChild(s),c.setAttribute("name","priority");let p=document.createElement("div"),u=document.createElement("label");u.setAttribute("for","description"),u.innerText="Description: ";let m=document.createElement("input");m.setAttribute("type","text"),m.setAttribute("name","description"),m.setAttribute("id","description"),p.appendChild(u),p.appendChild(m);let h=document.createElement("div"),b=document.createElement("label");b.setAttribute("for","date"),b.innerText="Due date: ";let E=document.createElement("input");E.setAttribute("type","date"),E.setAttribute("id","date"),E.setAttribute("name","date"),E.required=!0,h.appendChild(b),h.appendChild(E),document.createElement("div");let C=document.createElement("div");return t.appendChild(n),t.appendChild(r),t.appendChild(p),t.appendChild(h),t.appendChild(C),t}}}();(()=>{const t=[],n=[];let o=[];const i=document.createElement("section");i.classList.add("projectsSection"),root.appendChild(i);const r=document.createElement("section");r.classList.add("navBar");const c=document.createElement("button");c.innerText="NEW PROJECT",c.setAttribute("name","newProject"),c.onclick=l;const d=document.createElement("button");function l(o){if(o.preventDefault,"newProject"===o.target.getAttribute("name")){let o=e.projectForm();o.onsubmit=e=>{e.preventDefault();let i=o.elements.project.value;new p(i),m(t,n),u(t,n)},root.appendChild(o)}else{let o=e.toDoForm();const i=document.createElement("div"),r=document.createElement("label");r.innerText="Project ";const c=document.createElement("select");c.setAttribute("name","project"),t.forEach((e=>{let t=document.createElement("option");t.innerText=`${e.name}`,c.appendChild(t)}));const d=document.createElement("input");d.setAttribute("type","submit"),d.innerText="Add To-Do",o.appendChild(i),i.appendChild(r),i.appendChild(c),o.appendChild(d),root.appendChild(o),o.onsubmit=e=>{e.preventDefault();let i=o.elements.date.value,r=o.elements.title.value,c=o.elements.description.value,d=o.elements.priority.value,l=o.elements.project.value;new s(r,c,i,d,l),u(t,n)}}}d.setAttribute("name","newToDo"),d.innerText="NEW TO-DO",d.onclick=l,r.appendChild(c),r.appendChild(d),root.appendChild(r);const a=document.createElement("section");a.classList.add("toDosSection"),root.appendChild(a);class s{constructor(e,t="no description",o,i,r="any"){this.title=e,this.description=t,this.dueDate=o,this.priority=i,this.project=r,this.any="any",n.push({...this})}}class p{constructor(e){this.name=e,t.push(this)}}function u(e,t){let n=JSON.parse(localStorage.getItem("todos"));n.length>0&&(t=n),console.log(n),document.querySelector("#root");const i=document.querySelector(".toDoArticle");i&&i.remove();const r=document.createElement("article");r.classList.add("toDoArticle"),t.forEach((n=>{const i=document.createElement("div");i.classList.add("toDoCard");const c=document.createElement("h2");c.innerText=`${n.title}`,i.appendChild(c);const d=document.createElement("p");if(d.innerText=`Due date: ${n.dueDate}`,i.appendChild(d),"any"!==n.project){const e=document.createElement("p");e.classList.add("project"),e.innerText=`Assigned project: ${n.project}`,i.appendChild(e)}!function e(){const t=document.createElement("button");t.classList.add("details"),t.innerText="Details",t.onclick=function(){i.appendChild(l),i.appendChild(s),p.appendChild(m),p.appendChild(h);document.querySelector(".details").remove();const t=document.createElement("button");t.innerText="Go Back",i.appendChild(t),t.onclick=()=>{document.querySelector(".project").remove(),s.remove(),m.remove(),h.remove(),t.remove(),e()}},i.appendChild(t)}();const l=document.createElement("p");""!==n.description?l.innerText=`description: ${n.description}`:l.innerText="No description";const s=document.createElement("p");s.innerText=`Priority: ${n.priority}`;const p=document.createElement("form"),m=document.createElement("label");m.setAttribute("for","projects"),m.innerText="choose project: ";const h=document.createElement("select");h.setAttribute("name","projects"),h.setAttribute("id","projects"),h.classList.add("select");const b=document.createElement("option");b.classList.add("option"),b.setAttribute("value","any"),b.innerText="Any",h.appendChild(b),e.forEach((e=>{const t=document.createElement("option");t.classList.add("option"),t.setAttribute("value",`${e.name}`),t.innerText=`${e.name}`,h.appendChild(t)})),p.onchange=function(i){const r=i.target.value;if(n.project=r,o){const i=o.findIndex((e=>e.title===n.title));t[i]=n,o=t;const r=localStorage.setItem("todos",JSON.stringify(o));console.log(r),u(e,o)}const c=t.findIndex((e=>e.title===n.title));t[c]=n,o=t;const d=localStorage.setItem("todos",JSON.stringify(o));console.log(d),u(e,o)},i.appendChild(p),r.appendChild(i),a.appendChild(r)}))}function m(e,n){const o=document.querySelector(".projectsContainer");o&&o.remove();const r=document.createElement("div");r.classList.add("projectsContainer");const c=document.createElement("button");if(c.innerText="Any",c.classList.add("projectBtn"),c.setAttribute("any","any"),c.addEventListener("click",(()=>{let e=n.filter((e=>"any"===e.any));u(t,e)})),r.appendChild(c),e.length>0){function d(e){e.preventDefault;let o=e.target.getAttribute("project-name"),i=n.filter((e=>e.project===o));u(t,i)}e.forEach((e=>{const t=document.createElement("button");t.innerText=e.name,t.classList.add("projectBtn"),t.addEventListener("click",d),t.setAttribute("project-name",e.name),r.appendChild(t)}))}i.appendChild(r)}m(t,n),u(t,n)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTlDLEVBQWVsQixFQUFlQyxHQUU5QmtCLEVBQVduQixFQUFlQyxFQW1QMUIsRUNqWEpzRSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvZm9ybXMuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvdG9kby5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgZm9ybXMgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGNoZWNrSWZJdEV4aXN0cygpIHtcbiAgICBsZXQgcHJldmlvdXNGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvcm0nKTtcbiAgICBjb25zb2xlLmxvZyhwcmV2aW91c0Zvcm0pXG4gICAgaWYgKHByZXZpb3VzRm9ybS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHByZXZpb3VzRm9ybS5mb3JFYWNoKChmb3JtKSA9PiB7XG4gICAgICAgICAgICBmb3JtLnJlbW92ZSgpO1xuICAgICAgICB9KVxuICAgICAgICBcbiAgICB9IFxuICB9O1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVByb2plY3RGb3JtKCkge1xuICAgICAgLy8gQ3JlYXRlIGFuZCByZXR1cm4gdGhlIEhUTUwgZm9yIHRoZSBwcm9qZWN0IGZvcm1cbiAgICAgIGNoZWNrSWZJdEV4aXN0cygpO1xuICAgICAgbGV0IHByb2plY3RGb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuICAgICAgcHJvamVjdEZvcm0uY2xhc3NMaXN0LmFkZCgnZm9ybScpO1xuICAgICAgXG4gICAgICBsZXQgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgcHJvamVjdE5hbWUuc2V0QXR0cmlidXRlKCdpZCcsICdwcm9qZWN0LW5hbWUnKTtcbiAgICAgIHByb2plY3ROYW1lLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0Jyk7XG4gICAgICBwcm9qZWN0TmFtZS5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAncHJvamVjdCcpXG4gICAgICBcbiAgICAgIGxldCBwcm9qZWN0TmFtZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgIHByb2plY3ROYW1lTGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCAncHJvamVjdC1uYW1lJyk7XG4gICAgICBwcm9qZWN0TmFtZUxhYmVsLmlubmVyVGV4dCA9ICdQcm9qZWN0IG5hbWU6ICdcblxuICAgICAgbGV0IHN1Ym1pdFByb2plY3RCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgc3VibWl0UHJvamVjdEJ0bi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnc3VibWl0Jyk7XG4gICAgICBzdWJtaXRQcm9qZWN0QnRuLmlubmVyVGV4dCA9ICdTdWJtaXQgUHJvamVjdCc7XG5cblxuICAgICAgcHJvamVjdEZvcm0uYXBwZW5kQ2hpbGQocHJvamVjdE5hbWVMYWJlbCk7XG4gICAgICBwcm9qZWN0Rm9ybS5hcHBlbmRDaGlsZChwcm9qZWN0TmFtZSk7XG4gICAgICBwcm9qZWN0Rm9ybS5hcHBlbmRDaGlsZChzdWJtaXRQcm9qZWN0QnRuKVxuICAgICAgXG4gICAgICAgIFxuICAgICAgcmV0dXJuIHByb2plY3RGb3JtO1xuICAgIH1cbiAgXG4gICAgZnVuY3Rpb24gY3JlYXRlVG9Eb0Zvcm0oKSB7XG4gICAgICAvLyBDcmVhdGUgYW5kIHJldHVybiB0aGUgSFRNTCBmb3IgdGhlIHRvLWRvIGZvcm1cbiAgICAgIGNoZWNrSWZJdEV4aXN0cygpO1xuICAgICAgbGV0IHRvZG9Gb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuICAgICAgdG9kb0Zvcm0uY2xhc3NMaXN0LmFkZCgnZm9ybScpXG4gICAgICAvKiB0aXRsZSBpbnB1dDogKi9cbiAgICAgIGxldCBkaXZUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgbGV0IGRpdlRpdGxlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgZGl2VGl0bGVMYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsICd0aXRsZScpO1xuICAgICAgZGl2VGl0bGVMYWJlbC5pbm5lclRleHQgPSAnVGl0bGU6ICc7XG4gICAgICBsZXQgZGl2VGl0bGVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICBkaXZUaXRsZUlucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0Jyk7XG4gICAgICBkaXZUaXRsZUlucHV0LnNldEF0dHJpYnV0ZSgnbmFtZScsICd0aXRsZScpO1xuICAgICAgZGl2VGl0bGVJbnB1dC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RpdGxlJyk7XG4gICAgICBkaXZUaXRsZUlucHV0LnNldEF0dHJpYnV0ZSgncmVxdWlyZWQnLCB0cnVlKTtcbiAgICAgIFxuICAgICAgZGl2VGl0bGUuYXBwZW5kQ2hpbGQoZGl2VGl0bGVMYWJlbCk7XG4gICAgICBkaXZUaXRsZS5hcHBlbmRDaGlsZChkaXZUaXRsZUlucHV0KTtcbiAgICAgIC8qIHByaW9yaXR5IGlucHV0OiAqL1xuICAgICAgbGV0IGRpdlByaW9yaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBsZXQgc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VsZWN0Jyk7XG4gICAgICBzZWxlY3Quc2V0QXR0cmlidXRlKCdpZCcsICdzZWxlY3QnKVxuICAgICAgbGV0IGRpdlByaW9yaXR5TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgZGl2UHJpb3JpdHlMYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsICdzZWxlY3QnKTtcbiAgICAgIGRpdlByaW9yaXR5TGFiZWwuaW5uZXJUZXh0ID0gJ1ByaW9yaXR5OiAnO1xuICAgICAgICAgIC8qIG9wdGlvbnMgKi9cbiAgICAgIGxldCBkaXZQcmlvcml0eUxvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgZGl2UHJpb3JpdHlMb3cuc2V0QXR0cmlidXRlKCd2YWx1ZScsICdMb3cnKTtcbiAgICAgIGRpdlByaW9yaXR5TG93LnNldEF0dHJpYnV0ZSgnbmFtZScsICdsb3cnKTtcbiAgICAgIGRpdlByaW9yaXR5TG93LnNldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnLCB0cnVlKTtcbiAgICAgIGRpdlByaW9yaXR5TG93LnNldEF0dHJpYnV0ZSgncmVxdWlyZWQnLCB0cnVlKTtcbiAgICAgIGRpdlByaW9yaXR5TG93LmlubmVyVGV4dCA9ICdMb3cnO1xuXG4gICAgICBsZXQgZGl2UHJpb3JpdHlNaWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgIGRpdlByaW9yaXR5TWlkLnNldEF0dHJpYnV0ZSgndmFsdWUnLCAnTWlkJyk7XG4gICAgICBkaXZQcmlvcml0eU1pZC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAnbWlkJyk7XG4gICAgICBkaXZQcmlvcml0eU1pZC5zZXRBdHRyaWJ1dGUoJ3JlcXVpcmVkJywgdHJ1ZSk7XG4gICAgICBkaXZQcmlvcml0eU1pZC5pbm5lclRleHQgPSAnTWlkJztcbiAgICAgXG4gICAgICBsZXQgZGl2UHJpb3JpdHlIaWdoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICBkaXZQcmlvcml0eUhpZ2guc2V0QXR0cmlidXRlKCd2YWx1ZScsICdIaWdoJyk7XG4gICAgICBkaXZQcmlvcml0eUhpZ2guc2V0QXR0cmlidXRlKCduYW1lJywgJ3ByaW9yaXR5Jyk7XG4gICAgICBkaXZQcmlvcml0eUhpZ2guc2V0QXR0cmlidXRlKCdyZXF1aXJlZCcsIHRydWUpO1xuICAgICAgZGl2UHJpb3JpdHlIaWdoLmlubmVyVGV4dCA9ICdIaWdoJztcbiAgICAgIFxuICAgICAgZGl2UHJpb3JpdHkuYXBwZW5kQ2hpbGQoZGl2UHJpb3JpdHlMYWJlbCk7XG4gICAgICBkaXZQcmlvcml0eS5hcHBlbmRDaGlsZChzZWxlY3QpO1xuICAgICAgc2VsZWN0LmFwcGVuZENoaWxkKGRpdlByaW9yaXR5TG93KTtcbiAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChkaXZQcmlvcml0eU1pZCk7XG4gICAgICBzZWxlY3QuYXBwZW5kQ2hpbGQoZGl2UHJpb3JpdHlIaWdoKTtcbiAgICAgIHNlbGVjdC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAncHJpb3JpdHknKVxuXG4gICAgICAvKiBkZXNjcmlwdGlvbiBpbnB1dCAqL1xuICAgICAgbGV0IGRpdkRlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBsZXQgZGl2RGVzY3JpcHRpb25MYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICBkaXZEZXNjcmlwdGlvbkxhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgJ2Rlc2NyaXB0aW9uJyk7XG4gICAgICBkaXZEZXNjcmlwdGlvbkxhYmVsLmlubmVyVGV4dCA9ICdEZXNjcmlwdGlvbjogJztcbiAgICAgIGxldCBkaXZEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgIGRpdkRlc2NyaXB0aW9uSW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcbiAgICAgIGRpdkRlc2NyaXB0aW9uSW5wdXQuc2V0QXR0cmlidXRlKCduYW1lJywgJ2Rlc2NyaXB0aW9uJyk7XG4gICAgICBkaXZEZXNjcmlwdGlvbklucHV0LnNldEF0dHJpYnV0ZSgnaWQnLCAnZGVzY3JpcHRpb24nKTtcbiAgICAgIFxuICAgICAgZGl2RGVzY3JpcHRpb24uYXBwZW5kQ2hpbGQoZGl2RGVzY3JpcHRpb25MYWJlbCk7XG4gICAgICBkaXZEZXNjcmlwdGlvbi5hcHBlbmRDaGlsZChkaXZEZXNjcmlwdGlvbklucHV0KTtcblxuICAgICAgLyogRHVlIGRhdGUgaW5wdXQgKi9cbiAgICAgIGxldCBkaXZEYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBsZXQgZGl2RGF0ZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgIGRpdkRhdGVMYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsICdkYXRlJylcbiAgICAgIGRpdkRhdGVMYWJlbC5pbm5lclRleHQgPSAnRHVlIGRhdGU6ICdcbiAgICAgIGxldCBkaXZEYXRlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgZGl2RGF0ZUlucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICdkYXRlJyk7XG4gICAgICBkaXZEYXRlSW5wdXQuc2V0QXR0cmlidXRlKCdpZCcsICdkYXRlJyk7XG4gICAgICBkaXZEYXRlSW5wdXQuc2V0QXR0cmlidXRlKCduYW1lJywgJ2RhdGUnKTtcbiAgICAgIGRpdkRhdGVJbnB1dC5yZXF1aXJlZCA9IHRydWU7XG5cbiAgICAgIGRpdkRhdGUuYXBwZW5kQ2hpbGQoZGl2RGF0ZUxhYmVsKTtcbiAgICAgIGRpdkRhdGUuYXBwZW5kQ2hpbGQoZGl2RGF0ZUlucHV0KTtcblxuXG4gICAgICBcblxuICAgICAgXG4gICAgICBcbiAgICAgIFxuICAgICAgbGV0IGRpdk5vdGVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBsZXQgZGl2UHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgdG9kb0Zvcm0uYXBwZW5kQ2hpbGQoZGl2VGl0bGUpO1xuICAgICAgdG9kb0Zvcm0uYXBwZW5kQ2hpbGQoZGl2UHJpb3JpdHkpO1xuICAgICAgdG9kb0Zvcm0uYXBwZW5kQ2hpbGQoZGl2RGVzY3JpcHRpb24pO1xuICAgICAgdG9kb0Zvcm0uYXBwZW5kQ2hpbGQoZGl2RGF0ZSk7XG4gICAgICB0b2RvRm9ybS5hcHBlbmRDaGlsZChkaXZQcm9qZWN0KTtcbiAgICAgIHJldHVybiB0b2RvRm9ybTtcbiAgICB9XG4gIFxuICAgIC8vIEV4cG9zZSB0aGUgZnVuY3Rpb25zIHlvdSB3YW50IHRvIG1ha2UgcHVibGljXG4gICAgcmV0dXJuIHtcbiAgICAgIHByb2plY3RGb3JtOiBjcmVhdGVQcm9qZWN0Rm9ybSxcbiAgICAgIHRvRG9Gb3JtOiBjcmVhdGVUb0RvRm9ybSxcbiAgICB9O1xuICB9KSgpOyIsIlxuaW1wb3J0IHsgZm9ybXMgfSBmcm9tIFwiLi9mb3Jtc1wiO1xuZXhwb3J0IGNvbnN0IGRvbU1hbmlwdWxhdGlvbiA9ICgpID0+IHtcbiAgICAvKiBnbG9iYWwgdmFyaWFibGVzICovXG4gICAgY29uc3QgcHJvamVjdHNBcnJheSA9IFtdO1xuICAgIGNvbnN0IHRvRG9zID0gW107XG4gICAgbGV0IHRvRG9zVXBkYXRlZCA9IFtdO1xuICAgIFxuICAgXG4gICAgLyogRE9NIHN0YXRpYyBzZWN0aW9ucyAqL1xuICAgIFxuXG4gICAgY29uc3QgcHJvamVjdHNTZWN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VjdGlvbicpO1xuICAgIHByb2plY3RzU2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0c1NlY3Rpb24nKTtcbiAgICByb290LmFwcGVuZENoaWxkKHByb2plY3RzU2VjdGlvbilcblxuICAgIGNvbnN0IG5hdkJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlY3Rpb24nKTtcbiAgICBuYXZCYXIuY2xhc3NMaXN0LmFkZCgnbmF2QmFyJyk7XG4gICAgY29uc3QgbmV3UHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIG5ld1Byb2plY3QuaW5uZXJUZXh0ID0gJ05FVyBQUk9KRUNUJztcbiAgICBuZXdQcm9qZWN0LnNldEF0dHJpYnV0ZSgnbmFtZScsICduZXdQcm9qZWN0Jyk7XG4gICAgbmV3UHJvamVjdC5vbmNsaWNrID0gaGFuZGxlQ2xpY2s7XG5cbiAgICBjb25zdCBuZXdUb0RvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgbmV3VG9Eby5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAnbmV3VG9EbycpO1xuICAgIG5ld1RvRG8uaW5uZXJUZXh0ID0gJ05FVyBUTy1ETyc7XG4gICAgbmV3VG9Eby5vbmNsaWNrID0gaGFuZGxlQ2xpY2s7XG5cbiAgICBuYXZCYXIuYXBwZW5kQ2hpbGQobmV3UHJvamVjdCk7XG4gICAgbmF2QmFyLmFwcGVuZENoaWxkKG5ld1RvRG8pO1xuICAgIHJvb3QuYXBwZW5kQ2hpbGQobmF2QmFyKTtcblxuICAgIFxuICAgIGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdFxuICAgICAgICBsZXQgY2xpY2tlZCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGNsaWNrZWQgPT09ICduZXdQcm9qZWN0Jykge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgcHJvamVjdEZvcm0gPSBmb3Jtcy5wcm9qZWN0Rm9ybSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBwcm9qZWN0Rm9ybS5vbnN1Ym1pdCA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGxldCBwcm9qZWN0TmFtZSA9IHByb2plY3RGb3JtLmVsZW1lbnRzW1wicHJvamVjdFwiXS52YWx1ZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdQcm9qZWN0ID0gbmV3IFByb2plY3QocHJvamVjdE5hbWUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJlbmRlclByb2plY3RzKHByb2plY3RzQXJyYXksIHRvRG9zKTsgXG4gICAgICAgICAgICAgICAgcmVuZGVyVG9Ebyhwcm9qZWN0c0FycmF5LCB0b0Rvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb290LmFwcGVuZENoaWxkKHByb2plY3RGb3JtKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHRvZG9Gb3JtID0gZm9ybXMudG9Eb0Zvcm0oKTtcbiAgICAgICAgICAgIC8qIHNlbGVjdCBwcm9qZWN0ICovXG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0U2VsZWN0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0U2VsZWN0TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgcHJvamVjdFNlbGVjdExhYmVsLmlubmVyVGV4dCA9IFwiUHJvamVjdCBcIlxuICAgICAgICAgICAgY29uc3QgcHJvamVjdFNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpO1xuICAgICAgICAgICAgcHJvamVjdFNlbGVjdC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAncHJvamVjdCcpXG4gICAgICAgICAgICBwcm9qZWN0c0FycmF5LmZvckVhY2goIChwcm9qZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHByb2plY3RPcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgICAgICAgICBwcm9qZWN0T3B0aW9uLmlubmVyVGV4dCA9IGAke3Byb2plY3QubmFtZX1gXG4gICAgICAgICAgICAgICAgcHJvamVjdFNlbGVjdC5hcHBlbmRDaGlsZChwcm9qZWN0T3B0aW9uKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjb25zdCBzdWJtaXRJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICBzdWJtaXRJbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnc3VibWl0Jyk7XG4gICAgICAgICAgICBzdWJtaXRJbnB1dC5pbm5lclRleHQgPSAnQWRkIFRvLURvJztcblxuICAgICAgICAgICAgdG9kb0Zvcm0uYXBwZW5kQ2hpbGQocHJvamVjdFNlbGVjdERpdik7XG4gICAgICAgICAgICBwcm9qZWN0U2VsZWN0RGl2LmFwcGVuZENoaWxkKHByb2plY3RTZWxlY3RMYWJlbCk7XG4gICAgICAgICAgICBwcm9qZWN0U2VsZWN0RGl2LmFwcGVuZENoaWxkKHByb2plY3RTZWxlY3QpO1xuICAgICAgICAgICAgdG9kb0Zvcm0uYXBwZW5kQ2hpbGQoc3VibWl0SW5wdXQpXG4gICAgICAgICAgICByb290LmFwcGVuZENoaWxkKHRvZG9Gb3JtKTtcblxuICAgICAgICAgICAgdG9kb0Zvcm0ub25zdWJtaXQ9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGxldCBkYXRlID0gdG9kb0Zvcm0uZWxlbWVudHNbXCJkYXRlXCJdLnZhbHVlO1xuICAgICAgICAgICAgICAgIGxldCB0aXRsZSA9IHRvZG9Gb3JtLmVsZW1lbnRzW1widGl0bGVcIl0udmFsdWU7XG4gICAgICAgICAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gdG9kb0Zvcm0uZWxlbWVudHNbXCJkZXNjcmlwdGlvblwiXS52YWx1ZTtcbiAgICAgICAgICAgICAgICBsZXQgcHJpb3JpdHkgPSB0b2RvRm9ybS5lbGVtZW50c1tcInByaW9yaXR5XCJdLnZhbHVlO1xuICAgICAgICAgICAgICAgIGxldCBwcm9qZWN0ID0gdG9kb0Zvcm0uZWxlbWVudHNbXCJwcm9qZWN0XCJdLnZhbHVlO1xuICAgICAgICAgICAgICAgIGxldCBzdWJtaXR0ZWRUb2RvID0gbmV3IFRvZG8odGl0bGUsIGRlc2NyaXB0aW9uLCBkYXRlLCBwcmlvcml0eSwgcHJvamVjdClcblxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJlbmRlclRvRG8ocHJvamVjdHNBcnJheSwgdG9Eb3MpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY29uc3QgdG9Eb3NDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWN0aW9uJyk7XG4gICAgdG9Eb3NDb250YWluZXIuY2xhc3NMaXN0LmFkZCgndG9Eb3NTZWN0aW9uJylcbiAgICByb290LmFwcGVuZENoaWxkKHRvRG9zQ29udGFpbmVyKVxuXG4gICAgXG4gICAgLyogY2xhc3NlcyAqL1xuICAgIGNsYXNzIFRvZG8ge1xuICAgICAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgZGVzY3JpcHRpb249J25vIGRlc2NyaXB0aW9uJywgZHVlRGF0ZSwgcHJpb3JpdHksIHByb2plY3Q9J2FueScpIHtcbiAgICAgICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZSxcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGUsXG4gICAgICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3RcbiAgICAgICAgICAgIHRoaXMuYW55ID0gJ2FueSdcbiAgICAgICAgICAgIHRvRG9zLnB1c2goIHsgLi4udGhpcyB9IClcbiAgICAgICAgfVxuXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBjbGFzcyBQcm9qZWN0IHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IG5hbWVcbiAgICAgICAgICAgIHByb2plY3RzQXJyYXkucHVzaCh0aGlzKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuXG4gICAgfVxuICAgIC8qIHRveSBvYmplY3RzIHRvIHNlZSBpZiBpdCB3b3JrcyAqL1xuICAgIFxuICAgIFxuICAgIFxuICAgIHJlbmRlclByb2plY3RzKHByb2plY3RzQXJyYXksIHRvRG9zKTtcbiAgICBcbiAgICByZW5kZXJUb0RvKHByb2plY3RzQXJyYXksIHRvRG9zKTtcbiAgICBcbiAgIFxuICAgIFxuICAgIFxuICAgIC8qIHJlbmRlciBhIHRvZG8gaXRlbSAqL1xuICAgIGZ1bmN0aW9uIHJlbmRlclRvRG8gKHByb2plY3RzLCB0b0Rvcykge1xuICAgIGxldCBsb2NhbFN0b3JhZ2VUb2RvcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RvZG9zJykpO1xuICAgIGlmIChsb2NhbFN0b3JhZ2VUb2Rvcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRvRG9zID0gbG9jYWxTdG9yYWdlVG9kb3M7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2cobG9jYWxTdG9yYWdlVG9kb3MpXG4gICAgY29uc3Qgcm9vdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyb290Jyk7XG4gICBcbiAgICAgICAgXG4gICAgY29uc3QgdG9Eb3NQcmV2aW91cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b0RvQXJ0aWNsZScpO1xuICAgIGlmICh0b0Rvc1ByZXZpb3VzKSB7XG4gICAgICAgIHRvRG9zUHJldmlvdXMucmVtb3ZlKClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGNvbnN0IHRvRG9BcnRpY2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXJ0aWNsZScpO1xuICAgIHRvRG9BcnRpY2xlLmNsYXNzTGlzdC5hZGQoJ3RvRG9BcnRpY2xlJyk7XG4gICAgXG4gICAgdG9Eb3MuZm9yRWFjaCgodG9kbykgPT4ge1xuICAgICAgICBcbiAgICBcbiAgICAgICAgY29uc3QgdG9kb0NhcmRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdG9kb0NhcmRDb250YWluZXIuY2xhc3NMaXN0LmFkZCgndG9Eb0NhcmQnKVxuICAgICAgICBcbiAgICBcbiAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICAgICAgICB0aXRsZS5pbm5lclRleHQgPSBgJHt0b2RvLnRpdGxlfWBcbiAgICAgICAgdG9kb0NhcmRDb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gICAgICAgIGNvbnN0IGR1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIGR1ZURhdGUuaW5uZXJUZXh0ID0gYER1ZSBkYXRlOiAke3RvZG8uZHVlRGF0ZX1gO1xuICAgICAgICB0b2RvQ2FyZENvbnRhaW5lci5hcHBlbmRDaGlsZChkdWVEYXRlKTtcblxuICAgICAgICBpZiAodG9kby5wcm9qZWN0ICE9PSAnYW55Jykge1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgIHByb2plY3QuY2xhc3NMaXN0LmFkZCgncHJvamVjdCcpXG4gICAgICAgICAgICBwcm9qZWN0LmlubmVyVGV4dCA9IGBBc3NpZ25lZCBwcm9qZWN0OiAke3RvZG8ucHJvamVjdH1gO1xuICAgICAgICAgICAgdG9kb0NhcmRDb250YWluZXIuYXBwZW5kQ2hpbGQocHJvamVjdCk7XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuXG5cbiAgICAgICAgKGZ1bmN0aW9uIGNyZWF0ZURldGFpbEJ0biAoKSB7XG4gICAgICAgICAgICBjb25zdCBkZXRhaWxzQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICBkZXRhaWxzQnRuLmNsYXNzTGlzdC5hZGQoJ2RldGFpbHMnKVxuICAgICAgICAgICAgZGV0YWlsc0J0bi5pbm5lclRleHQgPSAnRGV0YWlscyc7XG4gICAgICAgICAgICBkZXRhaWxzQnRuLm9uY2xpY2sgPSBkZXRhaWxDbGlja0hhbmRsZXI7XG4gICAgICAgICAgICB0b2RvQ2FyZENvbnRhaW5lci5hcHBlbmRDaGlsZChkZXRhaWxzQnRuKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRldGFpbENsaWNrSGFuZGxlcigpIHtcbiAgICAgICAgICAgICAgICB0b2RvQ2FyZENvbnRhaW5lci5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgdG9kb0NhcmRDb250YWluZXIuYXBwZW5kQ2hpbGQocHJpb3JpdHkpO1xuICAgICAgICAgICAgICAgIHByb2plY3RGb3JtLmFwcGVuZENoaWxkKHNlbGVjdExhYmVsKTtcbiAgICAgICAgICAgICAgICBwcm9qZWN0Rm9ybS5hcHBlbmRDaGlsZChwcm9qZWN0U2VsZWN0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXRhaWxzQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRldGFpbHMnKTtcbiAgICAgICAgICAgICAgICBkZXRhaWxzQnRuLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVuZGV0YWlsZWRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgICAgICB1bmRldGFpbGVkQnRuLmlubmVyVGV4dCA9ICdHbyBCYWNrJztcbiAgICAgICAgICAgICAgICB0b2RvQ2FyZENvbnRhaW5lci5hcHBlbmRDaGlsZCh1bmRldGFpbGVkQnRuKTtcbiAgICAgICAgICAgICAgICB1bmRldGFpbGVkQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QnKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHkucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdExhYmVsLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0U2VsZWN0LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB1bmRldGFpbGVkQnRuLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVEZXRhaWxCdG4oKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKCk7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIC8qIHRhYmFzIGhhY2llbmRvIGVsIGJvdG9uIHBhcmEgZXhwYW5kaXIgZGV0YWxsZXMsIGFwcGVuZGVhbmRvIGxvcyBkZW1hcyBlbGVtZW50b3Mgc29sbyBjdWFuZG8gc2UgY2xpY2tlZSBlc3RvLCBhY29yZGF0ZSBkZSBib3JyYXIgKi9cbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIGlmICh0b2RvLmRlc2NyaXB0aW9uICE9PSAnJykge1xuICAgICAgICAgICAgZGVzY3JpcHRpb24uaW5uZXJUZXh0ID0gYGRlc2NyaXB0aW9uOiAke3RvZG8uZGVzY3JpcHRpb259YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLmlubmVyVGV4dCA9J05vIGRlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICBcbiAgICAgICAgXG4gICAgXG4gICAgICAgIGNvbnN0IHByaW9yaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICBwcmlvcml0eS5pbm5lclRleHQgPSBgUHJpb3JpdHk6ICR7dG9kby5wcmlvcml0eX1gO1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIFxuICAgICAgICBcbiAgICBcbiAgICAgICAgY29uc3QgcHJvamVjdEZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XG4gICAgICAgIFxuICAgIFxuICAgICAgICBjb25zdCBzZWxlY3RMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgIHNlbGVjdExhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgJ3Byb2plY3RzJyk7XG4gICAgICAgIHNlbGVjdExhYmVsLmlubmVyVGV4dCA9ICdjaG9vc2UgcHJvamVjdDogJ1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcHJvamVjdFNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpO1xuICAgICAgICBwcm9qZWN0U2VsZWN0LnNldEF0dHJpYnV0ZSgnbmFtZScsICdwcm9qZWN0cycpO1xuICAgICAgICBwcm9qZWN0U2VsZWN0LnNldEF0dHJpYnV0ZSgnaWQnLCAncHJvamVjdHMnKTtcbiAgICAgICAgcHJvamVjdFNlbGVjdC5jbGFzc0xpc3QuYWRkKCdzZWxlY3QnKVxuICAgICAgICBjb25zdCBhbnlPcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgYW55T3B0aW9uLmNsYXNzTGlzdC5hZGQoJ29wdGlvbicpO1xuICAgICAgICBhbnlPcHRpb24uc2V0QXR0cmlidXRlKCd2YWx1ZScsICdhbnknKTtcbiAgICAgICAgYW55T3B0aW9uLmlubmVyVGV4dCA9IGAkeydBbnknfWBcbiAgICAgICAgcHJvamVjdFNlbGVjdC5hcHBlbmRDaGlsZChhbnlPcHRpb24pXG4gICAgICAgIHByb2plY3RzLmZvckVhY2gocHJvamVjdCA9PiB7XG4gICAgICAgIFxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgICAgICBvcHRpb24uY2xhc3NMaXN0LmFkZChgb3B0aW9uYCk7XG4gICAgICAgICAgICBvcHRpb24uc2V0QXR0cmlidXRlKCd2YWx1ZScsIGAke3Byb2plY3QubmFtZX1gKTtcbiAgICAgICAgICAgIG9wdGlvbi5pbm5lclRleHQgPSBgJHtwcm9qZWN0Lm5hbWV9YFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHByb2plY3RTZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHByb2plY3RGb3JtLm9uY2hhbmdlID0gaGFuZGxlQ2hhbmdlO1xuICAgICAgICBcbiAgICAgICAgdG9kb0NhcmRDb250YWluZXIuYXBwZW5kQ2hpbGQocHJvamVjdEZvcm0pO1xuICAgICAgICBcblxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlQ2hhbmdlIChlKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgLyogcmV0cmlldmVzIHRoZSB2YWx1ZSBvZiB0aGUgb3B0aW9uIHNlbGVjdGVkICovXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZFByb2plY3QgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgLyogYXNzaWducyB0aGF0IHZhbHVlIHRvIHRoZSBwcm9qZWN0IHByb3BlcnR5IG9mIHRoZSB0b2RvICovXG4gICAgICAgICAgICB0b2RvLnByb2plY3QgPSBzZWxlY3RlZFByb2plY3Q7XG4gICAgICAgICAgICAvKiBmaW5kcyB0aGF0IHRvZG8gaW4gdGhlIHRvZG9zIGFycmF5Ki9cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRvRG9zVXBkYXRlZCkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGluQXJyYXkgPSB0b0Rvc1VwZGF0ZWQuZmluZEluZGV4KChlbCkgPT4ge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWwudGl0bGUgPT09IHRvZG8udGl0bGVcbiAgICAgICAgICAgICAgICB9KSAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdG9Eb3NbaW5BcnJheV0gPSB0b2RvO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdG9Eb3NVcGRhdGVkID0gdG9Eb3M7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgdG9Eb3NVcGRhdGVkTFMgPSBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9kb3MnLCBKU09OLnN0cmluZ2lmeSh0b0Rvc1VwZGF0ZWQpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0b0Rvc1VwZGF0ZWRMUylcbiAgICAgICAgICAgICAgICBcblxuICAgICAgICAgICAgICAgIHJlbmRlclRvRG8ocHJvamVjdHMsIHRvRG9zVXBkYXRlZCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpbkFycmF5ID0gdG9Eb3MuZmluZEluZGV4KChlbCkgPT4ge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBlbC50aXRsZSA9PT0gdG9kby50aXRsZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRvRG9zW2luQXJyYXldID0gdG9kbztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdG9Eb3NVcGRhdGVkID0gdG9Eb3M7XG4gICAgICAgICAgICBjb25zdCB0b0Rvc1VwZGF0ZWRMUyA9IGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2RvcycsIEpTT04uc3RyaW5naWZ5KHRvRG9zVXBkYXRlZCkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2codG9Eb3NVcGRhdGVkTFMpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlbmRlclRvRG8ocHJvamVjdHMsIHRvRG9zVXBkYXRlZCk7XG5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICB0b0RvQXJ0aWNsZS5hcHBlbmRDaGlsZCh0b2RvQ2FyZENvbnRhaW5lcik7XG4gICAgICAgIFxuICAgICAgICB0b0Rvc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0b0RvQXJ0aWNsZSlcbiAgICAgICAgXG4gICAgfSlcbiAgICAgXG59XG4gICAgLyogcHJvamVjdCByZW5kZXJpbmcgKi9cbiAgICBmdW5jdGlvbiByZW5kZXJQcm9qZWN0cyhwcm9qZWN0cywgdG9Eb3MpIHtcbiAgICAgICAgXG4gICAgICAgIC8qIGNoZWNrIGlmIHByb2plY3RzIGFscmVhZHkgZXhpc3RzLCBhbmQgcmVtb3ZlIGl0Ki9cbiAgICAgICAgY29uc3QgcHJldmlvdXNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdHNDb250YWluZXInKVxuICAgICAgICBpZihwcmV2aW91c0NvbnRhaW5lcikge1xuICAgICAgICAgICAgcHJldmlvdXNDb250YWluZXIucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgLyogaWYgaXQgZG9lc250IGV4aXN0LCBjcmVhdGUgaXQgKi9cbiAgICAgICAgY29uc3QgcHJvamVjdHNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgcHJvamVjdHNDb250YWluZXIuY2xhc3NMaXN0LmFkZCgncHJvamVjdHNDb250YWluZXInKTtcbiAgICAgICAgLyogcmVuZGVyIGFueSBidXR0b24gKi9cbiAgICAgICAgY29uc3QgYW55QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGFueUJ0bi5pbm5lclRleHQgPSAnQW55JztcbiAgICAgICAgYW55QnRuLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3RCdG4nKTtcbiAgICAgICAgYW55QnRuLnNldEF0dHJpYnV0ZSgnYW55JywgJ2FueScpXG4gICAgICAgIGFueUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGxldCBwcm9qZWN0VG9Eb3MgPSB0b0Rvcy5maWx0ZXIoIChlbCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbC5hbnkgPT09ICdhbnknXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZW5kZXJUb0RvKHByb2plY3RzQXJyYXksIHByb2plY3RUb0RvcylcbiAgICAgICAgfSlcbiAgICAgICAgcHJvamVjdHNDb250YWluZXIuYXBwZW5kQ2hpbGQoYW55QnRuKVxuICAgICAgICAvKiByZW5kZXIgZWFjaCBwcm9qZWN0IGFzIGEgYnV0dG9uLCBpZiB0aGVyZSdzIG1vcmUgdGhhbiAwKi9cbiAgICAgICAgaWYgKHByb2plY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHByb2plY3RzLmZvckVhY2gocHJvamVjdCA9PiB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHByb2plY3RCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgICAgICBwcm9qZWN0QnRuLmlubmVyVGV4dCA9IHByb2plY3QubmFtZTtcbiAgICAgICAgICAgICAgICBwcm9qZWN0QnRuLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3RCdG4nKTtcbiAgICAgICAgICAgICAgICBwcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xpY2spO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHByb2plY3RCdG4uc2V0QXR0cmlidXRlKCdwcm9qZWN0LW5hbWUnLCBwcm9qZWN0Lm5hbWUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICBcbiAgICAgICAgICAgICAgICBwcm9qZWN0c0NvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9qZWN0QnRuKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvKiBldmVudCBsaXN0ZW5lciwgcmVuZGVycyBldmVyeSBlbGVtZW50IHRoYXQgY29ycmVzcG9uZHMgd2l0aCB0aGUgcHJvamVjdCBjbGlja2VkKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGUpe1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdFxuICAgICAgICAgICAgbGV0IHByb2plY3RDbGlja2VkID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdwcm9qZWN0LW5hbWUnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IHByb2plY3RUb0RvcyA9IHRvRG9zLmZpbHRlciggKGVsKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsLnByb2plY3QgPT09IHByb2plY3RDbGlja2VkIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHJlbmRlclRvRG8ocHJvamVjdHNBcnJheSwgcHJvamVjdFRvRG9zKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgXG4gICAgICAgIFxuICAgICAgICBwcm9qZWN0c1NlY3Rpb24uYXBwZW5kQ2hpbGQocHJvamVjdHNDb250YWluZXIpXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgfVxuICAgIFxuXG5cbiIsImltcG9ydCB7IGRvbU1hbmlwdWxhdGlvbiB9IGZyb20gXCIuL3RvZG9cIjtcblxuZG9tTWFuaXB1bGF0aW9uKCk7XG5cblxuXG5cblxuXG5cblxuXG4iXSwibmFtZXMiOlsiY2hlY2tJZkl0RXhpc3RzIiwicHJldmlvdXNGb3JtIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY29uc29sZSIsImxvZyIsImxlbmd0aCIsImZvckVhY2giLCJmb3JtIiwicmVtb3ZlIiwicHJvamVjdEZvcm0iLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwicHJvamVjdE5hbWUiLCJzZXRBdHRyaWJ1dGUiLCJwcm9qZWN0TmFtZUxhYmVsIiwiaW5uZXJUZXh0Iiwic3VibWl0UHJvamVjdEJ0biIsImFwcGVuZENoaWxkIiwidG9Eb0Zvcm0iLCJ0b2RvRm9ybSIsImRpdlRpdGxlIiwiZGl2VGl0bGVMYWJlbCIsImRpdlRpdGxlSW5wdXQiLCJkaXZQcmlvcml0eSIsInNlbGVjdCIsImRpdlByaW9yaXR5TGFiZWwiLCJkaXZQcmlvcml0eUxvdyIsImRpdlByaW9yaXR5TWlkIiwiZGl2UHJpb3JpdHlIaWdoIiwiZGl2RGVzY3JpcHRpb24iLCJkaXZEZXNjcmlwdGlvbkxhYmVsIiwiZGl2RGVzY3JpcHRpb25JbnB1dCIsImRpdkRhdGUiLCJkaXZEYXRlTGFiZWwiLCJkaXZEYXRlSW5wdXQiLCJyZXF1aXJlZCIsImRpdlByb2plY3QiLCJwcm9qZWN0c0FycmF5IiwidG9Eb3MiLCJ0b0Rvc1VwZGF0ZWQiLCJwcm9qZWN0c1NlY3Rpb24iLCJyb290IiwibmF2QmFyIiwibmV3UHJvamVjdCIsIm9uY2xpY2siLCJoYW5kbGVDbGljayIsIm5ld1RvRG8iLCJlIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJvbnN1Ym1pdCIsImVsZW1lbnRzIiwidmFsdWUiLCJQcm9qZWN0IiwicmVuZGVyUHJvamVjdHMiLCJyZW5kZXJUb0RvIiwicHJvamVjdFNlbGVjdERpdiIsInByb2plY3RTZWxlY3RMYWJlbCIsInByb2plY3RTZWxlY3QiLCJwcm9qZWN0IiwicHJvamVjdE9wdGlvbiIsIm5hbWUiLCJzdWJtaXRJbnB1dCIsImRhdGUiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicHJpb3JpdHkiLCJUb2RvIiwidG9Eb3NDb250YWluZXIiLCJjb25zdHJ1Y3RvciIsImR1ZURhdGUiLCJ0aGlzIiwiYW55IiwicHVzaCIsInByb2plY3RzIiwibG9jYWxTdG9yYWdlVG9kb3MiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicXVlcnlTZWxlY3RvciIsInRvRG9zUHJldmlvdXMiLCJ0b0RvQXJ0aWNsZSIsInRvZG8iLCJ0b2RvQ2FyZENvbnRhaW5lciIsImNyZWF0ZURldGFpbEJ0biIsImRldGFpbHNCdG4iLCJzZWxlY3RMYWJlbCIsInVuZGV0YWlsZWRCdG4iLCJhbnlPcHRpb24iLCJvcHRpb24iLCJvbmNoYW5nZSIsInNlbGVjdGVkUHJvamVjdCIsImluQXJyYXkiLCJmaW5kSW5kZXgiLCJlbCIsInRvRG9zVXBkYXRlZExTIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInByZXZpb3VzQ29udGFpbmVyIiwicHJvamVjdHNDb250YWluZXIiLCJhbnlCdG4iLCJhZGRFdmVudExpc3RlbmVyIiwicHJvamVjdFRvRG9zIiwiZmlsdGVyIiwicHJvamVjdENsaWNrZWQiLCJwcm9qZWN0QnRuIiwiZG9tTWFuaXB1bGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==